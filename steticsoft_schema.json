{
  "tables": [
    {
      "name": "rol",
      "columns": [
        { "name": "id_rol", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(50)", "isNotNull": true, "isUnique": true },
        { "name": "tipo_perfil", "type": "VARCHAR(10)", "isNotNull": true, "defaultValue": "'EMPLEADO'" },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "permisos",
      "columns": [
        { "name": "id_permiso", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "permisos_x_rol",
      "columns": [
        { "name": "id_rol", "type": "INT", "isPrimaryKey": true, "isNotNull": true },
        { "name": "id_permiso", "type": "INT", "isPrimaryKey": true, "isNotNull": true }
      ]
    },
    {
      "name": "usuario",
      "columns": [
        { "name": "id_usuario", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "correo", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "contrasena", "type": "TEXT", "isNotNull": true },
        { "name": "id_rol", "type": "INT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "dashboard",
      "columns": [
        { "name": "id_dashboard", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "fecha_creacion", "type": "DATE", "isNotNull": true, "defaultValue": "CURRENT_DATE" },
        { "name": "nombre_dashboard", "type": "VARCHAR(100)" }
      ]
    },
    {
      "name": "estado",
      "columns": [
        { "name": "id_estado", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre_estado", "type": "VARCHAR(45)", "isNotNull": true, "isUnique": true }
      ]
    },
    {
      "name": "cliente",
      "columns": [
        { "name": "id_cliente", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "apellido", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "correo", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "telefono", "type": "VARCHAR(20)", "isNotNull": true },
        { "name": "tipo_documento", "type": "VARCHAR(50)", "isNotNull": true },
        { "name": "numero_documento", "type": "VARCHAR(45)", "isNotNull": true, "isUnique": true },
        { "name": "fecha_nacimiento", "type": "DATE", "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "id_usuario", "type": "INT", "isNotNull": true, "isUnique": true }
      ]
    },
    {
      "name": "empleado",
      "columns": [
        { "name": "id_empleado", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "apellido", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "correo", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "telefono", "type": "VARCHAR(20)", "isNotNull": true },
        { "name": "tipo_documento", "type": "VARCHAR(50)", "isNotNull": true },
        { "name": "numero_documento", "type": "VARCHAR(45)", "isNotNull": true, "isUnique": true },
        { "name": "fecha_nacimiento", "type": "DATE", "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "id_usuario", "type": "INT", "isNotNull": true, "isUnique": true }
      ]
    },
    {
      "name": "especialidad",
      "columns": [
        { "name": "id_especialidad", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "empleado_especialidad",
      "columns": [
        { "name": "id_empleado", "type": "INT", "isPrimaryKey": true, "isNotNull": true },
        { "name": "id_especialidad", "type": "INT", "isPrimaryKey": true, "isNotNull": true }
      ]
    },
    {
      "name": "proveedor",
      "columns": [
        { "name": "id_proveedor", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "tipo", "type": "VARCHAR(50)", "isNotNull": true },
        { "name": "tipo_documento", "type": "VARCHAR(50)" },
        { "name": "numero_documento", "type": "VARCHAR(45)" },
        { "name": "nit_empresa", "type": "VARCHAR(45)", "isUnique": true },
        { "name": "telefono", "type": "VARCHAR(20)", "isNotNull": true },
        { "name": "correo", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "direccion", "type": "TEXT", "isNotNull": true },
        { "name": "nombre_persona_encargada", "type": "VARCHAR(100)" },
        { "name": "telefono_persona_encargada", "type": "VARCHAR(20)" },
        { "name": "email_persona_encargada", "type": "VARCHAR(100)" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "categoria_producto",
      "columns": [
        { "name": "id_categoria_producto", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "vida_util_dias", "type": "INT" },
        { "name": "tipo_uso", "type": "VARCHAR(10)", "isNotNull": true }
      ]
    },
    {
      "name": "categoria_servicio",
      "columns": [
        { "name": "id_categoria_servicio", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "producto",
      "columns": [
        { "name": "id_producto", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "existencia", "type": "INT", "defaultValue": "0" },
        { "name": "precio", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "stock_minimo", "type": "INT", "defaultValue": "0" },
        { "name": "stock_maximo", "type": "INT", "defaultValue": "0" },
        { "name": "imagen", "type": "TEXT" },
        { "name": "vida_util_dias", "type": "INT" },
        { "name": "tipo_uso", "type": "VARCHAR(255)", "isNotNull": true, "defaultValue": "'Venta Directa'" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "id_categoria_producto", "type": "INT" }
      ]
    },
    {
      "name": "compra",
      "columns": [
        { "name": "id_compra", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "fecha", "type": "DATE", "defaultValue": "CURRENT_DATE" },
        { "name": "total", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "iva", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "id_proveedor", "type": "INT" },
        { "name": "id_dashboard", "type": "INT" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "venta",
      "columns": [
        { "name": "id_venta", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "fecha", "type": "DATE", "defaultValue": "CURRENT_DATE" },
        { "name": "total", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "iva", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "id_cliente", "type": "INT" },
        { "name": "id_dashboard", "type": "INT" },
        { "name": "id_estado", "type": "INT" }
      ]
    },
    {
      "name": "cita",
      "columns": [
        { "name": "id_cita", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "fecha_hora", "type": "TIMESTAMP WITH TIME ZONE", "isNotNull": true },
        { "name": "id_cliente", "type": "INT" },
        { "name": "id_empleado", "type": "INT" },
        { "name": "id_estado", "type": "INT" }
      ]
    },
    {
      "name": "servicio",
      "columns": [
        { "name": "id_servicio", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "nombre", "type": "VARCHAR(100)", "isNotNull": true, "isUnique": true },
        { "name": "descripcion", "type": "TEXT" },
        { "name": "precio", "type": "DECIMAL(12, 2)", "isNotNull": true, "defaultValue": "0.00" },
        { "name": "imagen_url", "type": "VARCHAR(255)" },
        { "name": "id_categoria_servicio", "type": "INT", "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "servicio_x_cita",
      "columns": [
        { "name": "id_servicio_x_cita", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "id_servicio", "type": "INT" },
        { "name": "id_cita", "type": "INT" }
      ]
    },
    {
      "name": "compra_x_producto",
      "columns": [
        { "name": "id_compra_x_producto", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "cantidad", "type": "INT", "defaultValue": "1" },
        { "name": "valor_unitario", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "id_compra", "type": "INT" },
        { "name": "id_producto", "type": "INT" }
      ]
    },
    {
      "name": "producto_x_venta",
      "columns": [
        { "name": "id_producto_x_venta", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "cantidad", "type": "INT", "defaultValue": "1" },
        { "name": "valor_unitario", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "id_producto", "type": "INT" },
        { "name": "id_venta", "type": "INT" },
        { "name": "id_dashboard", "type": "INT" }
      ]
    },
    {
      "name": "venta_x_servicio",
      "columns": [
        { "name": "id_venta_x_servicio", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "valor_servicio", "type": "DECIMAL(12, 2)", "defaultValue": "0.00" },
        { "name": "id_servicio", "type": "INT" },
        { "name": "id_cita", "type": "INT" },
        { "name": "id_venta", "type": "INT" }
      ]
    },
    {
      "name": "abastecimiento",
      "columns": [
        { "name": "id_abastecimiento", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "cantidad", "type": "INT", "isNotNull": true },
        { "name": "id_producto", "type": "INT", "isNotNull": true },
        { "name": "fecha_ingreso", "type": "DATE", "isNotNull": true, "defaultValue": "CURRENT_DATE" },
        { "name": "id_empleado_asignado", "type": "INT" },
        { "name": "esta_agotado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "FALSE" },
        { "name": "razon_agotamiento", "type": "TEXT" },
        { "name": "fecha_agotamiento", "type": "DATE" },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" }
      ]
    },
    {
      "name": "novedades",
      "columns": [
        { "name": "id_novedad", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "dia_semana", "type": "INT", "isNotNull": true },
        { "name": "hora_inicio", "type": "TIME", "isNotNull": true },
        { "name": "hora_fin", "type": "TIME", "isNotNull": true },
        { "name": "estado", "type": "BOOLEAN", "isNotNull": true, "defaultValue": "TRUE" },
        { "name": "id_empleado", "type": "INT", "isNotNull": true }
      ]
    },
    {
      "name": "token_recuperacion",
      "columns": [
        { "name": "id_token_recuperacion", "type": "SERIAL", "isPrimaryKey": true, "isNotNull": true },
        { "name": "id_usuario", "type": "INTEGER", "isNotNull": true },
        { "name": "token", "type": "TEXT", "isNotNull": true, "isUnique": true },
        { "name": "fecha_expiracion", "type": "TIMESTAMP WITH TIME ZONE", "isNotNull": true }
      ]
    }
  ],
  "relationships": [
    { "startTable": "permisos_x_rol", "startColumn": "id_rol", "endTable": "rol", "endColumn": "id_rol", "onDelete": "CASCADE" },
    { "startTable": "permisos_x_rol", "startColumn": "id_permiso", "endTable": "permisos", "endColumn": "id_permiso", "onDelete": "CASCADE" },
    { "startTable": "usuario", "startColumn": "id_rol", "endTable": "rol", "endColumn": "id_rol", "onDelete": "RESTRICT" },
    { "startTable": "cliente", "startColumn": "id_usuario", "endTable": "usuario", "endColumn": "id_usuario", "onDelete": "RESTRICT" },
    { "startTable": "empleado", "startColumn": "id_usuario", "endTable": "usuario", "endColumn": "id_usuario", "onDelete": "RESTRICT" },
    { "startTable": "empleado_especialidad", "startColumn": "id_empleado", "endTable": "empleado", "endColumn": "id_empleado", "onDelete": "CASCADE" },
    { "startTable": "empleado_especialidad", "startColumn": "id_especialidad", "endTable": "especialidad", "endColumn": "id_especialidad", "onDelete": "CASCADE" },
    { "startTable": "producto", "startColumn": "id_categoria_producto", "endTable": "categoria_producto", "endColumn": "id_categoria_producto", "onDelete": "RESTRICT" },
    { "startTable": "compra", "startColumn": "id_proveedor", "endTable": "proveedor", "endColumn": "id_proveedor", "onDelete": "RESTRICT" },
    { "startTable": "compra", "startColumn": "id_dashboard", "endTable": "dashboard", "endColumn": "id_dashboard", "onDelete": "SET NULL" },
    { "startTable": "venta", "startColumn": "id_cliente", "endTable": "cliente", "endColumn": "id_cliente", "onDelete": "RESTRICT" },
    { "startTable": "venta", "startColumn": "id_dashboard", "endTable": "dashboard", "endColumn": "id_dashboard", "onDelete": "SET NULL" },
    { "startTable": "venta", "startColumn": "id_estado", "endTable": "estado", "endColumn": "id_estado", "onDelete": "RESTRICT" },
    { "startTable": "cita", "startColumn": "id_cliente", "endTable": "cliente", "endColumn": "id_cliente", "onDelete": "CASCADE" },
    { "startTable": "cita", "startColumn": "id_empleado", "endTable": "empleado", "endColumn": "id_empleado", "onDelete": "SET NULL" },
    { "startTable": "cita", "startColumn": "id_estado", "endTable": "estado", "endColumn": "id_estado", "onDelete": "RESTRICT" },
    { "startTable": "servicio", "startColumn": "id_categoria_servicio", "endTable": "categoria_servicio", "endColumn": "id_categoria_servicio", "onDelete": "RESTRICT" },
    { "startTable": "servicio", "startColumn": "id_especialidad", "endTable": "especialidad", "endColumn": "id_especialidad", "onDelete": "RESTRICT" },
    { "startTable": "servicio_x_cita", "startColumn": "id_servicio", "endTable": "servicio", "endColumn": "id_servicio", "onDelete": "CASCADE" },
    { "startTable": "servicio_x_cita", "startColumn": "id_cita", "endTable": "cita", "endColumn": "id_cita", "onDelete": "CASCADE" },
    { "startTable": "compra_x_producto", "startColumn": "id_compra", "endTable": "compra", "endColumn": "id_compra", "onDelete": "CASCADE" },
    { "startTable": "compra_x_producto", "startColumn": "id_producto", "endTable": "producto", "endColumn": "id_producto", "onDelete": "RESTRICT" },
    { "startTable": "producto_x_venta", "startColumn": "id_producto", "endTable": "producto", "endColumn": "id_producto", "onDelete": "RESTRICT" },
    { "startTable": "producto_x_venta", "startColumn": "id_venta", "endTable": "venta", "endColumn": "id_venta", "onDelete": "CASCADE" },
    { "startTable": "producto_x_venta", "startColumn": "id_dashboard", "endTable": "dashboard", "endColumn": "id_dashboard", "onDelete": "SET NULL" },
    { "startTable": "venta_x_servicio", "startColumn": "id_servicio", "endTable": "servicio", "endColumn": "id_servicio", "onDelete": "RESTRICT" },
    { "startTable": "venta_x_servicio", "startColumn": "id_cita", "endTable": "cita", "endColumn": "id_cita", "onDelete": "SET NULL" },
    { "startTable": "venta_x_servicio", "startColumn": "id_venta", "endTable": "venta", "endColumn": "id_venta", "onDelete": "CASCADE" },
    { "startTable": "abastecimiento", "startColumn": "id_producto", "endTable": "producto", "endColumn": "id_producto", "onDelete": "RESTRICT" },
    { "startTable": "abastecimiento", "startColumn": "id_empleado_asignado", "endTable": "empleado", "endColumn": "id_empleado", "onDelete": "SET NULL" },
    { "startTable": "novedades", "startColumn": "id_empleado", "endTable": "empleado", "endColumn": "id_empleado", "onDelete": "CASCADE" },
    { "startTable": "token_recuperacion", "startColumn": "id_usuario", "endTable": "usuario", "endColumn": "id_usuario", "onDelete": "CASCADE" }
  ]
}
